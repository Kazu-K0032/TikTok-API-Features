{% extends "base.html" %} {% block title %}ダッシュボード{% endblock %} {% block
content %}
<h1>ユーザープロフィール</h1>
<div class="card">
  <div class="profile-container">
    <div>
      <img
        src="{{ profile.avatar_url or '' }}"
        alt="アバター"
        class="profile-avatar"
        onerror="this.style.display='none'"
      />
    </div>
    <div>
      <h2 class="profile-name">{{ profile.display_name or '未設定' }}</h2>
      <p class="profile-openid">
        Open ID: <code>{{ profile.open_id or '未取得' }}</code>
      </p>
      {% if profile.bio_description %}
      <p class="profile-bio">
        <strong>自己紹介:</strong> {{ profile.bio_description }}
      </p>
      {% endif %} {% if profile.is_verified %}
      <p class="profile-verified">✓ 認証済みアカウント</p>
      {% endif %} {% if profile.profile_web_link %}
      <p class="profile-link">
        <a href="{{ profile.profile_web_link }}" target="_blank">
          🌐 プロフィールページを開く
        </a>
      </p>
      {% endif %}
    </div>
  </div>
</div>

<h2>統計情報</h2>
<div class="stats-grid">
  <div class="stat-card">
    <div class="stat-number">{{ profile.follower_count }}</div>
    <div class="stat-label">フォロワー数</div>
  </div>
  <div class="stat-card">
    <div class="stat-number">{{ profile.following_count }}</div>
    <div class="stat-label">フォロー数</div>
  </div>
  <div class="stat-card">
    <div class="stat-number">{{ profile.video_count }}</div>
    <div class="stat-label">動画数</div>
  </div>
  <div class="stat-card">
    <div class="stat-number">{{ profile.likes_count }}</div>
    <div class="stat-label">いいね数</div>
  </div>
</div>
<p>
  <small
    >※ 統計情報が0の場合は、user.info.stats
    スコープの認証が必要か、実際の値が0の可能性があります</small
  >
</p>

<h2>投稿動画一覧</h2>
{% if videos %}
<div class="video-grid">
  {% for v in videos %}
  <div class="video-card">
    {% if v.best_image_url %}
    <div class="video-thumbnail">
      <img src="{{ v.best_image_url }}" alt="サムネイル" class="video-cover" />
    </div>
    {% endif %}
    <h3 class="video-title">{{ v.title or 'タイトルなし' }}</h3>
    <div class="video-meta">
      <div class="video-id"><strong>ID:</strong> <code>{{ v.id }}</code></div>
      <div class="video-date">
        <strong>投稿日:</strong> {{ v.formatted_create_time }}
      </div>
    </div>
    <div class="video-stats">
      <div>
        <div class="video-stat-number">{{ v.duration or 0 }}秒</div>
        <div class="video-stat-label">再生時間</div>
      </div>
      <div>
        <div class="video-stat-number">{{ v.view_count or 0 }}</div>
        <div class="video-stat-label">再生数</div>
      </div>
      <div>
        <div class="video-stat-number">{{ v.like_count or 0 }}</div>
        <div class="video-stat-label">いいね</div>
      </div>
      <div>
        <div class="video-stat-number">{{ v.comment_count or 0 }}</div>
        <div class="video-stat-label">コメント</div>
      </div>
    </div>
    <a href="{{ url_for('video_detail', video_id=v.id) }}" class="btn btn-small"
      >詳細を見る</a
    >
  </div>
  {% endfor %}
</div>
{% else %}
<div class="card empty-state">
  <p class="empty-state-title">動画が見つかりませんでした</p>
  <p class="empty-state-description">
    ※ 公開動画がないか、動画が存在しない可能性があります
  </p>
</div>
{% endif %}

<a href="{{ url_for('index') }}" class="back-link">← ホームへ戻る</a>
{% endblock %}
