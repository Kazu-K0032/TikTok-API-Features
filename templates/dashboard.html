{% extends "base.html" %} {% block title %}ダッシュボード{% endblock %} {% block
content %}
<h1>ユーザープロフィール</h1>
<div class="card">
  <div style="display: flex; align-items: center; gap: 20px">
    <div>
      <img
        src="{{ profile.avatar_url or '' }}"
        alt="アバター"
        style="
          width: 80px;
          height: 80px;
          border-radius: 50%;
          border: 3px solid #fff;
          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        "
        onerror="this.style.display='none'"
      />
    </div>
    <div>
      <h2 style="margin: 0 0 10px 0; color: #333">
        {{ profile.display_name or '未設定' }}
      </h2>
      <p
        style="margin: 0; color: #666; font-family: monospace; font-size: 14px"
      >
        Open ID: <code>{{ profile.open_id or '未取得' }}</code>
      </p>
    </div>
  </div>
</div>

<h2>統計情報</h2>
<div class="stats-grid">
  <div class="stat-card">
    <div class="stat-number">{{ profile.follower_count }}</div>
    <div class="stat-label">フォロワー数</div>
  </div>
  <div class="stat-card">
    <div class="stat-number">{{ profile.following_count }}</div>
    <div class="stat-label">フォロー数</div>
  </div>
  <div class="stat-card">
    <div class="stat-number">{{ profile.video_count }}</div>
    <div class="stat-label">動画数</div>
  </div>
  <div class="stat-card">
    <div class="stat-number">{{ profile.likes_count }}</div>
    <div class="stat-label">いいね数</div>
  </div>
</div>
<p>
  <small
    >※ 統計情報が0の場合は、user.info.stats
    スコープの認証が必要か、実際の値が0の可能性があります</small
  >
</p>

<h2>投稿動画一覧</h2>
{% if videos %}
<div class="video-grid">
  {% for v in videos %}
  <div class="video-card">
    <h3 style="margin: 0 0 10px 0; color: #333; font-size: 16px">
      {{ v.title or 'タイトルなし' }}
    </h3>
    <div style="margin-bottom: 10px; font-size: 12px; color: #666">
      <strong>ID:</strong> <code>{{ v.id }}</code>
    </div>
    <div class="video-stats">
      <div>
        <div style="font-weight: bold; color: #ff0050">{{ v.duration }}秒</div>
        <div style="font-size: 12px; color: #666">再生時間</div>
      </div>
      <div>
        <div style="font-weight: bold; color: #ff0050">{{ v.view_count }}</div>
        <div style="font-size: 12px; color: #666">再生数</div>
      </div>
      <div>
        <div style="font-weight: bold; color: #ff0050">{{ v.like_count }}</div>
        <div style="font-size: 12px; color: #666">いいね</div>
      </div>
    </div>
    <a
      href="{{ url_for('video_detail', video_id=v.id) }}"
      class="btn"
      style="padding: 8px 16px; font-size: 14px"
      >詳細を見る</a
    >
  </div>
  {% endfor %}
</div>
{% else %}
<div
  class="card"
  style="text-align: center; padding: 40px; border: 2px dashed #ddd"
>
  <p style="margin: 0 0 10px 0; font-size: 18px; color: #666">
    動画が見つかりませんでした
  </p>
  <p style="margin: 0; font-size: 14px; color: #999">
    ※ 公開動画がないか、動画が存在しない可能性があります
  </p>
</div>
{% endif %}

<a href="{{ url_for('index') }}" class="back-link">← ホームへ戻る</a>
{% endblock %}
